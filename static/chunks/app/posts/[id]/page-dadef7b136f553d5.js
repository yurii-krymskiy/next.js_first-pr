(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[722],{4354:function(e,t,s){Promise.resolve().then(s.bind(s,3965))},4864:function(e,t,s){"use strict";s.d(t,{Q:function(){return pocketbase},Y:function(){return getData}});var l=s(6172);let pocketbase=()=>{let e=new l.ZP("http://127.0.0.1:8090/api/collections/posts/records");e.autoCancellation(!1);let getPosts=async()=>e.collection("posts").getFullList();return{getPosts}},getData=async()=>{try{let e=await fetch("http://127.0.0.1:8090/api/collections/posts/records");if(!e.ok)throw Error("HTTP error! Статус: ".concat(e.status));let t=await e.json();return t}catch(e){throw console.error("Виникла помилка:",e),e}}},3965:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return page}});var l=s(7437),a=s(4864),n=s(2265),o=s(6172);let addComments=async e=>{let t=new o.ZP("http://127.0.0.1:8090"),s=await t.collection("comments").create(e);return{record:s}},getComment=async()=>{let e=new o.ZP("http://127.0.0.1:8090");e.autoCancellation(!1);let t=await e.collection("comments").getFullList();return{record:t}},CommentForm=e=>{let{onSubmit:t,id:s}=e,[a,o]=(0,n.useState)(""),[r,i]=(0,n.useState)(""),[c,d]=(0,n.useState)(""),[m,u]=(0,n.useState)(!1),handleReset=()=>{o(""),i(""),d("")},x={personalId:s,name:a,email:r,comment:c};return(0,l.jsx)("div",{children:(0,l.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(a||r||c)&&(t({id:s,name:a,email:r,comment:c}),handleReset(),u(!0),addComments(x))},children:[(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Ім'я:"}),(0,l.jsx)("input",{type:"text",id:"name",value:a,onChange:e=>{o(e.target.value)},required:!0,className:"mt-1 p-2 block w-full rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Електронна пошта:"}),(0,l.jsx)("input",{type:"email",id:"email",value:r,onChange:e=>{i(e.target.value)},required:!0,className:"mt-1 p-2 block w-full rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{htmlFor:"comment",className:"block text-sm font-medium text-gray-700",children:"Коментар:"}),(0,l.jsx)("textarea",{id:"comment",value:c,onChange:e=>{d(e.target.value)},required:!0,className:"mt-1 p-2 block w-full rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,l.jsx)("div",{children:(0,l.jsx)("button",{type:"submit",className:"inline-block bg-96B6C5 text-white px-4 py-2 rounded-md hover:bg-indigo-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Відправити коментар"})})]})})},CommentInfo=e=>{let{comment:t}=e;return(0,l.jsxs)("article",{className:"bg-gray-100 border p-4 rounded-md",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mt-2",children:t.name}),(0,l.jsx)("p",{className:"mt-2",children:t.comment})]})},CommentList=e=>{let{comment:t}=e;return(0,l.jsx)("section",{className:"space-y-4",children:t?t.map((e,t)=>(0,l.jsx)(CommentInfo,{comment:e},t)):null})};var page=e=>{let{params:t}=e,[s,o]=(0,n.useState)([]),r=t.id,{getPosts:i}=(0,a.Q)(),[c,d]=(0,n.useState)(null);return(0,n.useEffect)(()=>{let loadData=async()=>{try{let e=await i(),s=e.find(e=>e.id===t.id);d(s||null);let l=await getComment(),a=l.record.filter(e=>e.personalId===t.id);o(a)}catch(e){console.error("Error loading data:",e)}};loadData()},[t.id]),(0,l.jsxs)("div",{className:"bg-EEE0C9 min-h-screen p-8",children:[(0,l.jsx)("div",{className:"max-w-2xl mx-auto bg-white p-6 rounded-lg shadow-lg",children:c?(0,l.jsx)("div",{children:(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-2xl font-semibold mb-4 sm:text-3xl md:text-4xl lg:text-5xl",children:c.title}),(0,l.jsx)("img",{src:c.url,className:"text-blue-500"}),(0,l.jsx)("p",{className:"mt-6",children:c.fulldesc}),(0,l.jsx)("p",{className:"mt-6 text-gray-600",children:c.date})]})}):(0,l.jsx)("p",{children:"Loading..."})}),(0,l.jsx)("div",{className:"max-w-2xl mx-auto mt-8",children:(0,l.jsx)(CommentForm,{id:r,onSubmit:e=>{let{...t}=e,s={id:"",collectionId:"",collectionName:"",created:"",updated:"",...t};o(e=>[...e,s]),console.log(s)}})}),(0,l.jsx)("div",{className:"max-w-2xl mx-auto mt-8",children:(0,l.jsx)(CommentList,{comment:s})})]})}}},function(e){e.O(0,[673,971,864,744],function(){return e(e.s=4354)}),_N_E=e.O()}]);